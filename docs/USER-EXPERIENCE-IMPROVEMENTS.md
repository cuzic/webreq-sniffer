# 利用者目線での改善提案

**作成日**: 2025-10-18
**対象**: WebreqSniffer Chrome Extension

---

## はじめに

本ドキュメントは、実際のユーザーが拡張機能を使用する際の体験を向上させるための改善提案をまとめたものです。優先度別に整理し、各提案には具体的な実装案と期待される効果を記載しています。

---

## 🔴 優先度: 高（すぐに実装すべき）

### 1. 選択的エクスポート機能

**現状の問題**:

- 全ログを一括エクスポートしかできない
- 不要なエントリーも含まれてしまう
- 大量のログから特定のものだけ欲しい場合に不便

**改善案**:

```
✓ チェックボックスで個別選択
✓ 全選択/全解除ボタン
✓ 逆選択ボタン
✓ フィルタ適用中のものを一括選択
✓ 選択数の表示（例: 5/128件選択中）
```

**実装箇所**: `src/popup/components/LogList.tsx`, `src/popup/Popup.tsx`

**期待される効果**:

- エクスポート時間の短縮
- 不要なデータの除外が容易
- ユーザーの満足度向上

**実装難易度**: ⭐⭐☆☆☆（中程度）

---

### 2. エクスポートプレビュー機能

**現状の問題**:

- エクスポート結果が見えない
- ダウンロードしてから中身を確認する必要がある
- テンプレートの動作確認に手間がかかる

**改善案**:

```
エクスポートダイアログに追加:
┌─────────────────────────────────────┐
│ Format: [Bash curl ▼]               │
│                                      │
│ Preview (最初の3エントリー):          │
│ ┌──────────────────────────────────┐ │
│ │ #!/bin/bash                       │ │
│ │ # Generated by WebreqSniffer     │ │
│ │                                   │ │
│ │ curl -L 'https://example.com/...'│ │
│ │ curl -L 'https://cdn.example...' │ │
│ │ ...                               │ │
│ └──────────────────────────────────┘ │
│                                      │
│ Total: 128 entries                   │
│ [プレビューを展開] [エクスポート]     │
└─────────────────────────────────────┘
```

**実装箇所**: `src/popup/components/ExportDialog.tsx`（新規作成）

**期待される効果**:

- エクスポート前に結果を確認できる
- テンプレート編集のフィードバックが早い
- エクスポートミスの削減

**実装難易度**: ⭐⭐⭐☆☆（やや高い）

---

### 3. リアルタイムフィルタープレビュー

**現状の問題**:

- フィルタ設定を変更しても、実際の効果が分かりにくい
- 設定後に監視を再開して確認する必要がある

**改善案**:

```
オプションページのフィルタタブに追加:
┌─────────────────────────────────────┐
│ Simple Filters:                      │
│ .m3u8                               │
│ .mpd                                 │
│                                      │
│ ✨ プレビュー (現在のログに適用):    │
│ ┌──────────────────────────────────┐ │
│ │ ✓ 12 entries match                │ │
│ │ ✗ 45 entries filtered out         │ │
│ │                                   │ │
│ │ Matched:                          │ │
│ │ • https://cdn.com/video.m3u8     │ │
│ │ • https://stream.com/dash.mpd    │ │
│ │ ...                               │ │
│ └──────────────────────────────────┘ │
└─────────────────────────────────────┘
```

**実装箇所**: `src/options/tabs/FiltersTab.tsx`

**期待される効果**:

- フィルタ設定のトライアンドエラーが容易
- 設定ミスの早期発見
- 学習コストの低減

**実装難易度**: ⭐⭐⭐☆☆（やや高い）

---

### 4. クイックアクション機能

**現状の問題**:

- 個別エントリーに対する操作が限定的
- URLのコピーなど基本的な操作が不便

**改善案**:

```
各ログエントリーに以下のアクションボタンを追加:

[📋 Copy URL] [🔍 Details] [🗑️ Delete] [⬇️ Export Single]

右クリックメニュー:
• Copy URL
• Copy as curl command
• Copy as yt-dlp command
• Open in new tab
• Delete this entry
• Export only this
• Filter this domain
• Filter this type
```

**実装箇所**: `src/popup/components/LogList.tsx`

**期待される効果**:

- 個別URLの利用が簡単に
- ワンクリックでの操作
- パワーユーザーの生産性向上

**実装難易度**: ⭐⭐☆☆☆（中程度）

---

### 5. 統計情報ダッシュボード

**現状の問題**:

- ログの全体像が把握しにくい
- どのドメインが多いか、どのタイプが多いかが分からない

**改善案**:

```
ポップアップに統計タブを追加:

┌─────────────────────────────────────┐
│ 📊 Statistics                        │
│                                      │
│ Total Entries: 128                   │
│ Time Range: 14:30 - 15:45           │
│                                      │
│ By Domain:                           │
│ ████████████ cdn.example.com (45)   │
│ ██████ stream.net (23)              │
│ ███ api.example.com (12)            │
│                                      │
│ By Type:                             │
│ ███████████ media (67)              │
│ █████ xmlhttprequest (34)           │
│ ██ script (15)                      │
│                                      │
│ By File Extension:                   │
│ ███████ .m3u8 (45)                  │
│ ████ .ts (28)                       │
│ ██ .mpd (12)                        │
└─────────────────────────────────────┘
```

**実装箇所**: `src/popup/tabs/StatsTab.tsx`（新規作成）

**期待される効果**:

- ログの全体像が一目で分かる
- フィルタ設定の参考になる
- 異常なリクエストの発見が容易

**実装難易度**: ⭐⭐⭐☆☆（やや高い）

---

## 🟡 優先度: 中（できれば実装したい）

### 6. エクスポート履歴機能

**現状の問題**:

- 過去にどんな設定でエクスポートしたか覚えていない
- 同じ設定を何度も入力する必要がある

**改善案**:

```
エクスポート設定の履歴を保存:

┌─────────────────────────────────────┐
│ Export History:                      │
│                                      │
│ 📝 2025-10-18 15:30                 │
│    Format: Bash curl                 │
│    Template: {videoTitle}_{date}.sh │
│    Entries: 45                       │
│    [再利用] [削除]                    │
│                                      │
│ 📝 2025-10-18 14:15                 │
│    Format: yt-dlp                    │
│    Template: stream_{domain}.sh     │
│    Entries: 12                       │
│    [再利用] [削除]                    │
└─────────────────────────────────────┘
```

**実装箇所**: `src/background/storage.ts`, `src/popup/components/ExportHistory.tsx`

**期待される効果**:

- 設定の再入力が不要
- 過去のエクスポートを参照できる
- 作業効率の向上

**実装難易度**: ⭐⭐⭐☆☆（やや高い）

---

### 7. 設定のインポート/エクスポート

**現状の問題**:

- 複数デバイスで同じ設定を使いたい場合に不便
- バックアップが取れない
- チームで設定を共有できない

**改善案**:

```
オプションページに追加:

┌─────────────────────────────────────┐
│ 設定の管理                            │
│                                      │
│ [📥 設定をインポート]                 │
│ [📤 設定をエクスポート]               │
│ [🔄 デフォルトに戻す]                │
│                                      │
│ エクスポート形式:                     │
│ • JSON (すべての設定)                │
│ • フィルタのみ                        │
│ • カスタムセレクターのみ              │
└─────────────────────────────────────┘
```

**実装箇所**: `src/options/tabs/AdvancedTab.tsx`

**期待される効果**:

- 設定の共有が簡単
- バックアップ・復元が可能
- 複数環境での作業が効率化

**実装難易度**: ⭐⭐☆☆☆（中程度）

---

### 8. 自動保存機能

**現状の問題**:

- ブラウザクラッシュ時にログが失われる
- 監視を長時間続けると不安

**改善案**:

```
設定に追加:

Auto-save Settings:
☑ Enable auto-save every [5▼] minutes
☑ Save to: [Downloads/webreq-backups/]
☑ Keep last [10▼] backups

Format: [JSON with metadata▼]
```

**実装箇所**: `src/background/auto-save.ts`（新規作成）

**期待される効果**:

- データ喪失のリスク軽減
- 長時間監視の安心感
- バックアップの自動化

**実装難易度**: ⭐⭐⭐☆☆（やや高い）

---

### 9. 検索機能の強化

**現状の問題**:

- 単純なテキスト検索のみ
- ヘッダー内の検索ができない
- 複数条件での検索ができない

**改善案**:

```
高度な検索UI:

┌─────────────────────────────────────┐
│ 🔍 Advanced Search                   │
│                                      │
│ Search in:                           │
│ ☑ URL                                │
│ ☑ Headers                            │
│ ☑ Domain                             │
│                                      │
│ Pattern: [.*\.m3u8$]                │
│ ○ Text  ● Regex                     │
│                                      │
│ Filters:                             │
│ Type: [All types ▼]                 │
│ Domain: [All domains ▼]             │
│ Date: [Today ▼]                     │
│                                      │
│ [Search] [Clear]                     │
│                                      │
│ 12 results found                     │
└─────────────────────────────────────┘
```

**実装箇所**: `src/popup/components/AdvancedSearch.tsx`（新規作成）

**期待される効果**:

- 目的のログを素早く見つけられる
- 複雑な条件での絞り込みが可能
- 大量ログでも使いやすい

**実装難易度**: ⭐⭐⭐⭐☆（高い）

---

### 10. キーボードショートカット

**現状の問題**:

- すべての操作がマウスクリック
- 頻繁な操作でも毎回クリック必要

**改善案**:

```
以下のショートカットを追加:

Global (Popup):
• Ctrl+M: 監視開始/停止
• Ctrl+E: エクスポート
• Ctrl+K: ログクリア
• Ctrl+F: 検索にフォーカス
• Ctrl+A: 全選択
• Esc: ダイアログを閉じる

List Navigation:
• ↑/↓: エントリー選択
• Space: チェックボックストグル
• Enter: 詳細を開く
• Delete: 選択中のエントリー削除

Settings Page:
• Ctrl+S: 保存
• Ctrl+Z: 元に戻す
```

**実装箇所**: `src/popup/hooks/useKeyboardShortcuts.ts`（新規作成）

**期待される効果**:

- 操作速度の大幅向上
- パワーユーザーの満足度向上
- アクセシビリティの向上

**実装難易度**: ⭐⭐⭐☆☆（やや高い）

---

## 🟢 優先度: 低（余裕があれば）

### 11. ダークモード対応

**現状の問題**:

- ライトモードのみ
- 夜間作業で目が疲れる

**改善案**:

- システム設定に従う自動切り替え
- 手動での切り替えオプション
- Tailwind CSSの`dark:`クラスを活用

**実装難易度**: ⭐⭐☆☆☆（中程度）

---

### 12. 多言語対応（i18n）

**現状の問題**:

- 日本語と英語が混在
- 国際的なユーザーに対応できない

**改善案**:

- chrome.i18n APIの活用
- 言語ファイルの整理（`_locales/ja/messages.json`）
- サポート言語: 日本語、英語、中国語（簡体字）

**実装難易度**: ⭐⭐⭐⭐☆（高い）

---

### 13. カスタムテーマ

**改善案**:

- プリセットテーマ（Blue, Green, Purple）
- カスタムカラー設定
- UI密度の調整（Compact/Comfortable/Spacious）

**実装難易度**: ⭐⭐⭐☆☆（やや高い）

---

### 14. 通知機能

**改善案**:

```
通知設定:
☑ 特定パターンのリクエストを検出時に通知
☑ エントリー数が閾値を超えた時に通知
☑ エクスポート完了時に通知

通知例:
「.m3u8 ファイルを検出しました (3件)」
```

**実装難易度**: ⭐⭐☆☆☆（中程度）

---

### 15. データ可視化（グラフ）

**改善案**:

- リクエスト数の時系列グラフ
- ドメイン別の円グラフ
- タイプ別の棒グラフ
- Chart.jsまたはD3.jsを使用

**実装難易度**: ⭐⭐⭐⭐☆（高い）

---

## 🎯 Quick Wins（低コストで高効果）

以下は実装が簡単で効果が高い改善提案です：

### A. ワンクリックコピー機能

```tsx
<Button onClick={() => navigator.clipboard.writeText(entry.url)}>📋 Copy URL</Button>
```

**実装時間**: 10分
**効果**: URL利用が劇的に楽になる

---

### B. エントリー数バッジ

```tsx
// 監視中にバッジを更新
chrome.action.setBadgeText({ text: entryCount.toString() });
chrome.action.setBadgeBackgroundColor({ color: '#4CAF50' });
```

**実装時間**: 15分
**効果**: 拡張機能アイコンでログ数が分かる

---

### C. ログのソート機能

```tsx
// ヘッダークリックでソート
<th onClick={() => setSortBy('timestamp')}>Timestamp ↓</th>
<th onClick={() => setSortBy('domain')}>Domain</th>
<th onClick={() => setSortBy('type')}>Type</th>
```

**実装時間**: 30分
**効果**: 目的のログが探しやすい

---

### D. ドメインでグループ化表示

```tsx
// ドメインごとにセクション分け
{
  Object.entries(groupByDomain(entries)).map(([domain, entries]) => (
    <details key={domain}>
      <summary>
        {domain} ({entries.length})
      </summary>
      {entries.map((entry) => (
        <LogEntry entry={entry} />
      ))}
    </details>
  ));
}
```

**実装時間**: 30分
**効果**: 大量ログでも見やすい

---

### E. エントリーの色分け

```tsx
const getTypeColor = (type: string) => {
  switch (type) {
    case 'media':
      return 'bg-blue-100';
    case 'xmlhttprequest':
      return 'bg-green-100';
    case 'script':
      return 'bg-yellow-100';
    default:
      return 'bg-gray-100';
  }
};
```

**実装時間**: 15分
**効果**: タイプが視覚的に分かりやすい

---

## 📋 実装ロードマップ

### Phase 1: 基本的なUX改善（1-2週間）

1. ✅ ワンクリックコピー
2. ✅ エントリー数バッジ
3. ✅ ログのソート
4. ✅ エントリーの色分け
5. ✅ 選択的エクスポート

### Phase 2: 情報可視化（2-3週間）

6. ✅ 統計情報ダッシュボード
7. ✅ ドメインでグループ化
8. ✅ リアルタイムフィルタープレビュー

### Phase 3: 高度な機能（3-4週間）

9. ✅ エクスポートプレビュー
10. ✅ クイックアクション
11. ✅ 検索機能強化
12. ✅ キーボードショートカット

### Phase 4: 利便性向上（2-3週間）

13. ✅ エクスポート履歴
14. ✅ 設定のインポート/エクスポート
15. ✅ 自動保存

### Phase 5: 外観・国際化（1-2週間）

16. ✅ ダークモード
17. ✅ 多言語対応

---

## 🔍 ユーザーフィードバックの収集方法

改善を進める際は、以下の方法でユーザーフィードバックを収集することを推奨します：

1. **GitHub Issues**:
   - Feature Request テンプレート
   - Bug Report テンプレート
   - User Experience テンプレート

2. **アンケート**:
   - Google Formsでの満足度調査
   - 使いにくい点の自由記述

3. **使用統計**（プライバシーに配慮）:
   - よく使われる機能の分析
   - エラー発生箇所の特定

4. **ベータテスト**:
   - 新機能のベータ版を少数ユーザーに提供
   - フィードバックを集めてから正式リリース

---

## まとめ

本提案書では、利用者目線での改善案を優先度別に整理しました。

**重要なポイント**:

1. **Quick Wins** から始めることで、早期に成果を実感できる
2. **統計情報** や **プレビュー機能** など、情報の可視化が重要
3. **選択的エクスポート** や **クイックアクション** で作業効率が大幅向上
4. **キーボードショートカット** でパワーユーザーの満足度向上

これらの改善により、WebreqSnifferはより使いやすく、生産性の高いツールになります。

---

**次のステップ**:

1. Phase 1 の Quick Wins を実装
2. ユーザーからのフィードバック収集
3. 優先度の再評価
4. Phase 2 以降の計画策定
